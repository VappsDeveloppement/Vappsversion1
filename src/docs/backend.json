

{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the VApps Success Hub platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the user."
        },
        "firstName": {
          "type": "string",
          "description": "The first name of the user."
        },
        "lastName": {
          "type": "string",
          "description": "The last name of the user."
        },
        "email": {
          "type": "string",
          "description": "The email address of the user.",
          "format": "email"
        },
        "role": {
          "type": "string",
          "enum": ["superadmin", "conseiller", "membre", "moderateur"],
          "description": "The global role of the user on the platform. 'superadmin' has all rights. 'conseiller' is a coach. 'membre' is a standard user/client. 'moderateur' has moderation rights."
        },
        "counselorId": {
            "type": "string",
            "description": "The ID of the user's assigned counselor. This is the key for data segregation."
        },
        "dateJoined": {
          "type": "string",
          "description": "The date and time the user joined the platform.",
          "format": "date-time"
        },
        "phone": {
          "type": "string",
          "description": "The user's phone number."
        },
        "address": {
          "type": "string",
          "description": "The user's street address."
        },
        "zipCode": {
          "type": "string",
          "description": "The user's postal code."
        },
        "city": {
          "type": "string",
          "description": "The user's city."
        },
        "commercialName": {
            "type": "string",
            "description": "The user's commercial or business name, if applicable."
        },
        "siret": {
            "type": "string",
            "description": "The user's SIRET number for their business."
        },
        "socialSecurityNumber": {
          "type": "string",
          "description": "The user's social security number."
        },
        "franceTravailId": {
          "type": "string",
          "description": "The user's France Travail identifier."
        },
        "origin": {
            "type": "string",
            "description": "Source of user creation (e.g., 'Footer Contact Form')."
        },
        "status": {
            "type": "string",
            "enum": ["new", "contacted", "not_interested"],
            "description": "Status for a prospect (e.g., new, contacted)."
        },
        "message": {
          "type": "string",
          "description": "The message sent by the prospect from the contact form."
        },
        "lastSignInTime": {
          "type": "string",
          "format": "date-time",
          "description": "The last time the user signed in, synced from Firebase Auth."
        },
        "gdprReportedAt": {
          "type": "string",
          "format": "date-time",
          "description": "Timestamp for when an admin reports an inactivity alert for this user."
        },
        "photoUrl": {
            "type": "string",
            "format": "uri",
            "description": "URL of the user's public profile photo."
        },
        "publicProfileName": {
            "type": "string",
            "description": "The user-defined public name for their mini-site URL."
        },
        "publicTitle": {
            "type": "string",
            "description": "Public-facing professional title for the counselor (e.g., 'Coach en développement personnel')."
        },
        "publicBio": {
            "type": "string",
            "description": "Public-facing biography for the counselor's profile page."
        },
        "miniSite": {
            "$ref": "#/entities/MiniSite"
        },
        "dashboardTheme": {
            "type": "object",
            "description": "Color personalization settings for the counselor's own dashboard.",
            "properties": {
                "primaryColor": { "type": "string" },
                "secondaryColor": { "type": "string" },
                "bgColor": { "type": "string" }
            }
        }
      },
      "required": [
        "firstName",
        "lastName",
        "email",
        "role",
        "dateJoined"
      ]
    },
    "MiniSite": {
        "title": "MiniSite",
        "type": "object",
        "description": "Personalization settings for the counselor's mini-site.",
        "properties": {
            "publicProfileName": {
                "type": "string",
                "description": "The public-facing URL slug for the mini-site."
            },
            "hero": {
                "type": "object",
                "properties": {
                    "title": { "type": "string" },
                    "subtitle": { "type": "string" },
                    "ctaText": { "type": "string" },
                    "ctaLink": { "type": "string" },
                    "cta2Text": { "type": "string" },
                    "cta2Link": { "type": "string" },
                    "showPhoto": { "type": "boolean" },
                    "showPhone": { "type": "boolean" },
                    "showLocation": { "type": "boolean" },
                    "bgColor": { "type": "string" },
                    "bgImageUrl": { "type": "string", "format": "uri" },
                    "titleColor": { "type": "string" },
                    "subtitleColor": { "type": "string" }
                }
            },
            "attentionSection": {
                "type": "object",
                "properties": {
                    "enabled": { "type": "boolean" },
                    "title": { "type": "string" },
                    "subtitle": { "type": "string" },
                    "text": { "type": "string" }
                }
            },
            "aboutSection": {
                "type": "object",
                "properties": {
                    "enabled": { "type": "boolean" },
                    "title": { "type": "string" },
                    "subtitle": { "type": "string" },
                    "text": { "type": "string" },
                    "imageUrl": { "type": "string", "format": "uri" }
                }
            },
            "servicesSection": {
                "type": "object",
                "properties": {
                    "enabled": { "type": "boolean" },
                    "title": { "type": "string" },
                    "subtitle": { "type": "string" },
                    "services": { 
                        "type": "array",
                        "items": {
                            "type": "object",
                            "properties": {
                                "id": { "type": "string" },
                                "title": { "type": "string" },
                                "description": { "type": "string" },
                                "imageUrl": { "type": "string", "format": "uri" }
                            }
                        }
                    }
                }
            },
            "parcoursSection": {
              "type": "object",
              "properties": {
                "enabled": { "type": "boolean" },
                "title": { "type": "string" },
                "subtitle": { "type": "string" },
                "steps": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": { "type": "string" },
                      "title": { "type": "string" },
                      "description": { "type": "string" }
                    }
                  }
                }
              }
            },
            "ctaSection": {
                "type": "object",
                "properties": {
                    "enabled": { "type": "boolean" },
                    "title": { "type": "string" },
                    "subtitle": { "type": "string" },
                    "text": { "type": "string" },
                    "buttonText": { "type": "string" },
                    "buttonLink": { "type": "string" },
                    "bgColor": { "type": "string" },
                    "bgImageUrl": { "type": "string", "format": "uri" }
                }
            },
            "pricingSection": {
                "type": "object",
                "properties": {
                    "enabled": { "type": "boolean" },
                    "title": { "type": "string" },
                    "subtitle": { "type": "string" },
                    "planIds": { 
                        "type": "array",
                        "items": { "type": "string" }
                    }
                }
            },
            "activitiesSection": {
                "type": "object",
                "properties": {
                    "enabled": { "type": "boolean" },
                    "title": { "type": "string" },
                    "text": { "type": "string" },
                    "mediaType": { "type": "string", "enum": ["image", "video"] },
                    "imageUrl": { "type": "string", "format": "uri" },
                    "videoUrl": { "type": "string", "format": "uri" },
                    "interestsTitle": { "type": "string" },
                    "interests": { "type": "string" },
                    "events": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": { "type": "string" },
                          "title": { "type": "string" },
                          "date": { "type": "string" }
                        }
                      }
                    },
                    "eventsButtonText": { "type": "string" },
                    "eventsButtonLink": { "type": "string" }
                }
            }
        }
    },
    "CounselorProfile": {
        "title": "Counselor Profile",
        "type": "object",
        "description": "Public-facing profile for a counselor's mini-site.",
        "properties": {
            "id": { "type": "string" },
            "firstName": { "type": "string" },
            "lastName": { "type": "string" },
            "email": { "type": "string", "format": "email" },
            "phone": { "type": "string" },
            "city": { "type": "string" },
            "photoUrl": { "type": "string", "format": "uri" },
            "publicTitle": { "type": "string" },
            "publicBio": { "type": "string" },
            "miniSite": { "$ref": "#/entities/MiniSite" },
            "dashboardTheme": {
                "type": "object",
                "properties": {
                    "primaryColor": { "type": "string" },
                    "secondaryColor": { "type": "string" },
                    "bgColor": { "type": "string" }
                }
            }
        },
        "required": ["id", "firstName", "lastName", "email"]
    },
    "Agency": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Agency",
      "type": "object",
      "description": "Represents the single, central entity for platform-wide personalization.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the agency (e.g., 'vapps-agency')." },
        "name": { "type": "string", "description": "The name of the agency." },
        "personalization": {
          "type": "object",
          "description": "All personalization settings for the agency.",
          "properties": {
            "appTitle": { "type": "string" },
            "appSubtitle": { "type": "string" },
            "logoDataUrl": { "type": "string", "format": "uri" },
            "logoWidth": { "type": "number" },
            "logoHeight": { "type": "number" },
            "logoDisplay": { "type": "string" },
            "primaryColor": { "type": "string" },
            "secondaryColor": { "type": "string" },
            "bgColor": { "type": "string" },
            "footerAboutTitle": { "type": "string" },
            "footerAboutText": { "type": "string" },
            "footerAboutLinks": { "type": "array", "items": { "type": "object" } },
            "footerSocialLinks": { "type": "array", "items": { "type": "object" } },
            "copyrightText": { "type": "string" },
            "copyrightUrl": { "type": "string" },
            "homePageVersion": { "type": "string" },
            "homePageSections": { "type": "array", "items": { "type": "object" } },
            "legalInfo": { "type": "object" }
          }
        }
      },
      "required": ["id", "name"]
    },
    "Appointment": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Appointment",
      "type": "object",
      "description": "Represents a scheduled appointment between a coach and a client.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the appointment."
        },
        "coachId": {
          "type": "string",
          "description": "Reference to User representing the coach. (Relationship: User 1:N Appointment)"
        },
        "clientId": {
          "type": "string",
          "description": "Reference to User representing the client. (Relationship: User 1:N Appointment)"
        },
        "startTime": {
          "type": "string",
          "description": "The start date and time of the appointment.",
          "format": "date-time"
        },
        "endTime": {
          "type": "string",
          "description": "The end date and time of the appointment.",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "The status of the appointment (e.g., scheduled, completed, cancelled)."
        },
        "notes": {
          "type": "string",
          "description": "Notes related to the appointment"
        }
      },
      "required": [
        "id",
        "coachId",
        "clientId",
        "startTime",
        "endTime",
        "status"
      ]
    },
    "EmailCampaign": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "EmailCampaign",
      "type": "object",
      "description": "Represents an email marketing campaign.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the email campaign."
        },
        "name": {
          "type": "string",
          "description": "The name of the email campaign."
        },
        "subject": {
          "type": "string",
          "description": "The subject line of the email campaign."
        },
        "body": {
          "type": "string",
          "description": "The HTML or plain text body of the email campaign."
        },
        "segment": {
          "type": "string",
          "description": "User segment targeted by the email campaign (e.g., new sign-ups, inactive users)."
        },
        "scheduledTime": {
          "type": "string",
          "description": "The date and time the email campaign is scheduled to be sent.",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "The status of the email campaign (e.g., draft, scheduled, sent, completed)."
        }
      },
      "required": [
        "id",
        "name",
        "subject",
        "body",
        "segment",
        "scheduledTime",
        "status"
      ]
    },
    "Message": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Message",
      "type": "object",
      "description": "Represents a message sent between users on the platform.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the message."
        },
        "senderId": {
          "type": "string",
          "description": "Reference to User who sent the message. (Relationship: User 1:N Message)"
        },
        "recipientId": {
          "type": "string",
          "description": "Reference to User who received the message. (Relationship: User 1:N Message)"
        },
        "timestamp": {
          "type": "string",
          "description": "The date and time the message was sent.",
          "format": "date-time"
        },
        "content": {
          "type": "string",
          "description": "The content of the message."
        },
        "isRead": {
          "type": "boolean",
          "description": "Indicates whether the recipient has read the message."
        }
      },
      "required": [
        "id",
        "senderId",
        "recipientId",
        "timestamp",
        "content",
        "isRead"
      ]
    },
    "Invoice": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Invoice",
      "type": "object",
      "description": "Represents an invoice for coaching sessions or other services, generated from an accepted quote.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the invoice." },
        "invoiceNumber": { "type": "string", "description": "The user-facing invoice number." },
        "counselorId": { "type": "string", "description": "The ID of the counselor who issued the invoice." },
        "clientId": { "type": "string" },
        "clientInfo": { "type": "object", "description": "A snapshot of the client's information." },
        "quoteNumber": { "type": "string", "description": "The number of the original quote." },
        "issueDate": { "type": "string", "format": "date" },
        "dueDate": { "type": "string", "format": "date" },
        "status": { "type": "string", "enum": ["pending", "paid", "overdue", "cancelled"], "description": "The status of the invoice." },
        "items": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "description": { "type": "string" },
              "quantity": { "type": "number" },
              "unitPrice": { "type": "number" },
              "total": { "type": "number" }
            },
            "required": ["description", "quantity", "unitPrice", "total"]
          }
        },
        "subtotal": { "type": "number" },
        "tax": { "type": "number" },
        "total": { "type": "number" }
      },
      "required": ["id", "invoiceNumber", "counselorId", "clientId", "quoteNumber", "issueDate", "dueDate", "status", "items", "total"]
    },
    "Quote": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Quote",
      "type": "object",
      "description": "Represents a quote or estimate for services.",
      "properties": {
        "id": { "type": "string", "description": "Unique identifier for the quote." },
        "quoteNumber": { "type": "string", "description": "The user-facing quote number." },
        "validationCode": { "type": "string", "description": "A secret code for the client to validate the quote." },
        "counselorId": { "type": "string", "description": "The ID of the counselor who created the quote." },
        "clientId": { "type": "string" },
        "clientInfo": { "type": "object", "description": "A snapshot of the client's information at the time of quote creation." },
        "agencyInfo": { "type": "object", "description": "A snapshot of the agency's information." },
        "issueDate": { "type": "string", "format": "date" },
        "expiryDate": { "type": "string", "format": "date" },
        "status": { "type": "string", "enum": ["draft", "sent", "accepted", "rejected"], "description": "The status of the quote." },
        "items": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "description": { "type": "string" },
              "quantity": { "type": "number" },
              "unitPrice": { "type": "number" },
              "total": { "type": "number" }
            },
            "required": ["description", "quantity", "unitPrice", "total"]
          }
        },
        "subtotal": { "type": "number" },
        "tax": { "type": "number" },
        "total": { "type": "number" },
        "notes": { "type": "string" },
        "contractId": { "type": "string", "description": "ID of the attached contract template." },
        "contractTitle": { "type": "string", "description": "Title of the attached contract." },
        "contractContent": { "type": "string", "description": "Snapshot of the contract HTML content." },
        "signature": { "type": "string", "description": "The name entered by the client as a signature." },
        "signedDate": { "type": "string", "format": "date-time", "description": "Timestamp of when the quote was signed." }
      },
      "required": ["id", "quoteNumber", "validationCode", "counselorId", "clientId", "issueDate", "status", "items", "total"]
    },
    "Contract": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "Contract",
        "type": "object",
        "description": "Represents a contract template for a counselor.",
        "properties": {
            "id": { "type": "string", "description": "Unique identifier for the contract." },
            "counselorId": { "type": "string", "description": "The ID of the counselor this contract belongs to." },
            "title": { "type": "string", "description": "The title of the contract template." },
            "content": { "type": "string", "description": "The HTML content of the contract." }
        },
        "required": ["id", "counselorId", "title", "content"]
    },
    "Consent": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Consent",
      "type": "object",
      "description": "Represents a user's consent to data processing, in line with GDPR.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the consent record."
        },
        "userId": {
          "type": "string",
          "description": "Reference to User who provided consent. (Relationship: User 1:N Consent)"
        },
        "consentType": {
          "type": "string",
          "description": "The type of consent (e.g., marketing emails, data sharing)."
        },
        "consentGiven": {
          "type": "boolean",
          "description": "Indicates whether the user has given consent."
        },
        "timestamp": {
          "type": "string",
          "description": "The date and time the consent was given or withdrawn.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "userId",
        "consentType",
        "consentGiven",
        "timestamp"
      ]
    },
    "LandingPage": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "LandingPage",
      "type": "object",
      "description": "Represents the configuration and content of the landing page.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the landing page configuration."
        },
        "title": {
          "type": "string",
          "description": "The title of the landing page."
        },
        "content": {
          "type": "string",
          "description": "The content of the landing page, stored as HTML or JSON."
        },
        "lastUpdated": {
          "type": "string",
          "description": "The date and time the landing page was last updated.",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "The status of the landing page (e.g., draft, published)."
        }
      },
      "required": [
        "id",
        "title",
        "content",
        "lastUpdated",
        "status"
      ]
    },
    "Plan": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Plan",
      "type": "object",
      "description": "Represents a pricing plan or a prestation model. Can be global, public, or counselor-specific.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the plan."
        },
        "counselorId": {
            "type": "string",
            "description": "The ID of the counselor this plan belongs to (for non-public plans)."
        },
        "name": {
          "type": "string",
          "description": "The name of the plan (e.g., 'Essentiel', 'Pro', 'Bilan de compétences')."
        },
        "description": {
          "type": "string",
          "description": "A short description of the plan."
        },
        "features": {
          "type": "array",
          "items": { "type": "string" },
          "description": "A list of features included in the plan."
        },
        "price": {
          "type": "number",
          "description": "The price of the plan."
        },
        "period": {
          "type": "string",
          "description": "The billing period (e.g., '/mois', '/an', '/prestation')."
        },
        "imageUrl": {
          "type": "string",
          "description": "URL of an image associated with the plan.",
          "format": "uri"
        },
        "appointmentCredits": {
          "type": "number",
          "description": "Number of appointment credits included in the plan."
        },
        "isFeatured": {
          "type": "boolean",
          "description": "Whether the plan should be highlighted as 'featured'."
        },
        "isPublic": {
          "type": "boolean",
          "description": "Whether the plan should be displayed on the public pricing page. If false, it's a counselor-specific template."
        }
      },
      "required": ["id", "name", "price", "period"]
    },
    "GdprRequest": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "GDPR Request",
        "type": "object",
        "description": "Represents a user request related to their personal data.",
        "properties": {
            "id": { "type": "string" },
            "counselorId": { "type": "string", "description": "ID of the counselor this request is directed to, if applicable." },
            "name": { "type": "string" },
            "email": { "type": "string", "format": "email" },
            "phone": { "type": "string" },
            "subject": { "type": "string" },
            "message": { "type": "string" },
            "status": { "type": "string", "enum": ["new", "in_progress", "closed"] },
            "createdAt": { "type": "string", "format": "date-time" }
        },
        "required": ["id", "name", "email", "phone", "subject", "message", "status", "createdAt"]
    },
    "SupportRequest": {
        "$schema": "http://json-schema.org/draft-07/schema#",
        "title": "Support Request",
        "type": "object",
        "description": "Represents a technical support request for the application.",
        "properties": {
            "id": { "type": "string" },
            "name": { "type": "string" },
            "email": { "type": "string", "format": "email" },
            "phone": { "type": "string" },
            "subject": { "type": "string" },
            "message": { "type": "string" },
            "status": { "type": "string", "enum": ["new", "in_progress", "closed"] },
            "createdAt": { "type": "string", "format": "date-time" }
        },
        "required": ["id", "name", "email", "phone", "subject", "message", "status", "createdAt"]
    },
    "FaqItem": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "FAQ Item",
      "type": "object",
      "description": "Represents a single question and answer item in a FAQ.",
      "properties": {
        "id": { "type": "string" },
        "category": { "type": "string", "description": "The category or theme of the question." },
        "question": { "type": "string", "description": "The FAQ question." },
        "content": { "type": "string", "description": "The answer content in HTML format." },
        "videoUrl": { "type": "string", "format": "uri", "description": "URL of an associated video." },
        "pdfUrls": { "type": "array", "items": { "type": "object", "properties": { "name": { "type": "string" }, "url": { "type": "string", "format": "uri" } } }, "description": "List of URLs to associated PDF documents." },
        "scope": { "type": "string", "enum": ["general", "counselor"], "description": "Defines if the FAQ is for the whole platform or a specific counselor." },
        "counselorId": { "type": "string", "description": "The ID of the counselor this FAQ item belongs to, if scope is 'counselor'." }
      },
      "required": ["id", "category", "question", "content", "scope"]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/agencies/{agencyId}",
        "definition": {
          "entityName": "Agency",
          "schema": { "$ref": "#/backend/entities/Agency" },
          "description": "Stores the single agency profile for platform-wide personalization. There should only be one document in this collection."
        }
      },
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores all user profiles (superadmin, counselors, members). Path-based ownership enables secure access based on user ID. counselorId is used for data segregation."
        }
      },
      {
        "path": "/minisites/{counselorId}",
        "definition": {
          "entityName": "CounselorProfile",
          "schema": {
            "$ref": "#/backend/entities/CounselorProfile"
          },
          "description": "Stores the public-facing profile data for a counselor's mini-site. The document ID is the counselor's user ID."
        }
      },
      {
        "path": "/plans/{planId}",
        "definition": {
          "entityName": "Plan",
          "schema": {
            "$ref": "#/backend/entities/Plan"
          },
          "description": "Stores all available pricing plans and prestation models for the platform. `isPublic` flag determines visibility on the public pricing page. Counselor-specific plans have a `counselorId`."
        }
      },
      {
        "path": "/quotes/{quoteId}",
        "definition": {
          "entityName": "Quote",
          "schema": {
            "$ref": "#/backend/entities/Quote"
          },
          "description": "Stores all quotes, segregated by counselorId."
        }
      },
      {
        "path": "/contracts/{contractId}",
        "definition": {
          "entityName": "Contract",
          "schema": {
            "$ref": "#/backend/entities/Contract"
          },
          "description": "Stores all contract templates, segregated by counselorId."
        }
      },
      {
        "path": "/invoices/{invoiceId}",
        "definition": {
          "entityName": "Invoice",
          "schema": {
            "$ref": "#/backend/entities/Invoice"
          },
          "description": "Stores all invoices, segregated by counselorId."
        }
      },
       {
        "path": "/gdpr_requests/{requestId}",
        "definition": {
          "entityName": "GdprRequest",
          "schema": { "$ref": "#/backend/entities/GdprRequest" },
          "description": "Stores user requests related to GDPR for tracking and management."
        }
      },
      {
        "path": "/support_requests/{requestId}",
        "definition": {
          "entityName": "SupportRequest",
          "schema": { "$ref": "#/backend/entities/SupportRequest" },
          "description": "Stores technical support requests for platform administrators."
        }
      },
      {
        "path": "/faq_items/{itemId}",
        "definition": {
          "entityName": "FaqItem",
          "schema": { "$ref": "#/backend/entities/FaqItem" },
          "description": "Stores all FAQ items. Items with scope 'general' are for the whole platform, 'counselor' scope requires a counselorId."
        }
      },
      {
        "path": "/users/{userId}/appointments/{appointmentId}",
        "definition": {
          "entityName": "Appointment",
          "schema": {
            "$ref": "#/backend/entities/Appointment"
          },
          "description": "Stores appointments for a specific user. Path-based ownership ensures only the user can access their appointments."
        }
      },
      {
        "path": "/users/{userId}/messages/{messageId}",
        "definition": {
          "entityName": "Message",
          "schema": {
            "$ref": "#/backend/entities/Message"
          },
          "description": "Stores messages for a specific user. Path-based ownership secures message access."
        }
      },
      {
        "path": "/users/{userId}/consents/{consentId}",
        "definition": {
          "entityName": "Consent",
          "schema": {
            "$ref": "#/backend/entities/Consent"
          },
          "description": "Stores consent records for a specific user. Path-based ownership guarantees data privacy."
        }
      },
      {
        "path": "/landing_pages/{landingPageId}",
        "definition": {
          "entityName": "LandingPage",
          "schema": {
            "$ref": "#/backend/entities/LandingPage"
          },
          "description": "Stores landing page configurations. Access controlled by administrator roles."
        }
      },
      {
        "path": "/email_campaigns/{emailCampaignId}",
        "definition": {
          "entityName": "EmailCampaign",
          "schema": {
            "$ref": "#/backend/entities/EmailCampaign"
          },
          "description": "Stores email campaigns. Access controlled by administrator roles."
        }
      }
    ],
    "reasoning": "The architecture is simplified to a single-app model centered around counselors. The `Membership` entity and `/memberships` collection are removed. Data segregation is now achieved using a `counselorId` field on `User`, `Quote`, `Invoice`, and `Contract` documents. This avoids complex lookups in security rules. Firestore collections for quotes, invoices, plans, and contracts are now at the root level, relying on `counselorId` for security rules, which is a more scalable and direct approach for this model."
  }
}

    